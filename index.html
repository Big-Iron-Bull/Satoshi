<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Clock</title>
    <style>
        body { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; background-image: url('https://live.staticflickr.com/65535/52198071220_f367fb6dcb_b.jpg-photo-3889895.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1'); background-size: contain; background-position: center; background-repeat: no-repeat; background-color: #333; padding: 0.42in 0; }
        .day-box { border: 1px solid black; border-radius: 10px; width: 120px; height: 60px; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #E3CEB9; }
        .day-box p { margin: 0; font-size: 8px; }
        .sepia-box { background-color: #E3CEB9; border-radius: 10px; padding: 5px 10px; }
        #alarms { position: absolute; left: 10%; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 10px; }
        .alarm { display: flex; align-items: center; gap: 10px; background: #E3CEB9; padding: 5px; border-radius: 5px; }
        .alarm span { font-weight: bold; }
        .switch { position: relative; display: inline-block; width: 40px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #2196F3; }
        input:checked + .slider:before { transform: translateX(20px); }
    </style>
</head>
<body>
    <div class="sepia-box" style="text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 4px;">Satoshi Nakamoto Time</div>
    <div id="heading" class="sepia-box" style="text-align: center; font-size: 20px; font-weight: bold; margin-bottom: 8px;">Egyptian Time (UTC +2)</div>
    <svg id="clock" width="578" height="578" viewBox="0 0 300 300">
        <circle cx="150" cy="150" r="140" stroke="black" stroke-width="2" fill="#E3CEB9"/>
        <circle cx="150" cy="150" r="35" stroke="black" stroke-width="2" fill="none"/>
        <g id="hour-hand">
            <line x1="150" y1="83.33" x2="150" y2="50" stroke="black" stroke-width="10.64" stroke-linecap="round"/>
            <polygon points="143.35,55 150,40 156.65,55" fill="black"/>
            <line x1="150" y1="150" x2="150" y2="190" stroke="black" stroke-width="3"/>
            <circle cx="150" cy="200" r="8" fill="black"/>
        </g>
        <g id="min-hand">
            <line x1="150" y1="70" x2="150" y2="30" stroke="black" stroke-width="6" stroke-linecap="round"/>
            <polygon points="147,35 150,20 153,35" fill="black"/>
            <line x1="150" y1="150" x2="150" y2="190" stroke="black" stroke-width="3"/>
        </g>
        <line id="sec-hand" x1="150" y1="170" x2="150" y2="20" stroke="black" stroke-width="2"/>
        <circle cx="150" cy="150" r="5" fill="black"/>
    </svg>
    <div id="alarms"></div>
    <div style="text-align: center; margin-top: 8px;">
        <p id="current-day-name" style="font-size: 22px; font-weight: bold; margin: 0;"></p>
        <p id="current-day-sub" style="font-size: 8px; font-weight: bold; opacity: 0.6; margin: 0;"></p>
    </div>
    <div id="digital" class="sepia-box" style="font-size: 20px; font-weight: bold; margin-top: 8px;"></div>
    <div id="calendar" style="display: flex; justify-content: center; gap: 8px; margin-top: 16px;"></div>
    <div id="utc-digital" class="sepia-box" style="font-size: 16px; font-weight: bold; margin-top: 4px;"></div>
    <select id="utc-offset" style="margin-top: 4px;"></select>
    <script>
        const svg = document.getElementById('clock');
        const labels = ["0 - 42", "6", "12", "18", "24", "30", "36"];
        function addTick(i) {
            const isNumbered = (i % 6 === 0);
            const innerR = isNumbered ? 120 : 130;
            const thickness = isNumbered ? 3 : 1;
            const alpha_deg = i * (360 / 42);
            const alpha_rad = alpha_deg * Math.PI / 180;
            const sin_a = Math.sin(alpha_rad);
            const cos_a = Math.cos(alpha_rad);
            const x1 = 150 - innerR * sin_a;
            const y1 = 150 - innerR * cos_a;
            const x2 = 150 - 140 * sin_a;
            const y2 = 150 - 140 * cos_a;
            const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
            line.setAttribute("x1", x1);
            line.setAttribute("y1", y1);
            line.setAttribute("x2", x2);
            line.setAttribute("y2", y2);
            line.setAttribute("stroke", "black");
            line.setAttribute("stroke-width", thickness);
            svg.insertBefore(line, svg.querySelector('#hour-hand'));
        }
        function addNumber(k) {
            const alpha_deg = k * (360 / 7);
            const alpha_rad = alpha_deg * Math.PI / 180;
            const sin_a = Math.sin(alpha_rad);
            const cos_a = Math.cos(alpha_rad);
            const x = 150 - 110 * sin_a;
            const y = 150 - 110 * cos_a + 7;
            const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            text.setAttribute("x", x);
            text.setAttribute("y", y);
            text.setAttribute("text-anchor", "middle");
            text.setAttribute("font-size", "14");
            text.setAttribute("font-weight", "bold");
            text.textContent = labels[k];
            svg.insertBefore(text, svg.querySelector('#hour-hand'));
        }
        for (let i = 0; i < 42; i++) addTick(i);
        for (let k = 0; k < 7; k++) addNumber(k);
        const select = document.getElementById('utc-offset');
        for (let i = -12; i <= 14; i++) {
            const option = document.createElement('option');
            option.value = i;
            option.text = `UTC${i >= 0 ? '+' : ''}${i}`;
            select.appendChild(option);
        }
        select.value = 0;
        const dayNames = ["Aк", "Haк", "Бaк", "Baк"];
        const daySubs = ["Sun-Mon", "Mon-Wed", "Wed-Fri", "Fri-Sat"];
        const calendar = document.getElementById('calendar');
        dayNames.forEach((name, index) => {
            const box = document.createElement('div');
            box.className = 'day-box';
            const [day1, day2] = daySubs[index].split('-');
            box.innerHTML = `<p style="font-weight: bold;">${name}</p><div style="display: flex; gap: 5px; font-size: 8px; align-items: center;"><span>${day1}</span><span>-</span><span>${day2}</span></div>`;
            calendar.appendChild(box);
        });
        let utcOffset = 2;
        let egyptOffset = utcOffset * 3600;
        function updateHeading() {
            document.getElementById('heading').textContent = `Egyptian Time (UTC ${utcOffset >= 0 ? '+' : ''}${utcOffset})`;
        }
        updateHeading();
        const alarms = [];
        const alarmTypes = ['Wake-up Time', 'Cheeseburger Time', 'Bed Time'];
        const alarmsDiv = document.getElementById('alarms');
        let audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let alarmInterval;
        function playAlarm() {
            const notes = [369.99, 466.16, 554.37]; // F#, A#, C#
            const oscillators = notes.map(freq => {
                const osc = audioContext.createOscillator();
                osc.type = 'sine';
                osc.frequency.value = freq;
                return osc;
            });
            const gainNode = audioContext.createGain();
            oscillators.forEach(osc => {
                osc.connect(gainNode);
                gainNode.connect(audioContext.destination);
                osc.start();
            });
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.5, audioContext.currentTime + 7);
            setTimeout(() => {
                oscillators.forEach(osc => osc.stop());
                if (alarmInterval) setTimeout(playAlarm, 2000);
            }, 7000);
        }
        function startAlarm() {
            if (!alarmInterval) {
                playAlarm();
                alarmInterval = true;
            }
        }
        function stopAlarm() {
            alarmInterval = false;
        }
        function renderAlarms() {
            alarmsDiv.innerHTML = '';
            alarms.forEach((alarm, index) => {
                if (!alarm.on) return;
                const div = document.createElement('div');
                div.className = 'alarm';
                div.innerHTML = `
                    <span>${alarm.type}: ${alarm.time}</span>
                    <label class="switch">
                        <input type="checkbox" checked onchange="toggleAlarm(${index})">
                        <span class="slider"></span>
                    </label>
                `;
                alarmsDiv.appendChild(div);
            });
        }
        function toggleAlarm(index) {
            alarms[index].on = false;
            stopAlarm();
            renderAlarms();
        }
        function addAlarm(typeIndex) {
            const time = prompt(`Enter ${alarmTypes[typeIndex]} (HH:MM, 00:00-41:59):`);
            if (time && /^([0-3]\d|4[01]):[0-5]\d$/.test(time)) {
                alarms.push({ type: alarmTypes[typeIndex], time, on: true });
                renderAlarms();
            }
        }
        document.addEventListener('keydown', (e) => {
            if (e.key === 'a' || e.key === 'A') {
                const choice = prompt('Enter alarm type: 1. Wake-up Time, 2. Cheeseburger Time, 3. Bed Time');
                const typeIndex = parseInt(choice) - 1;
                if (typeIndex >= 0 && typeIndex < 3) addAlarm(typeIndex);
            } else if (e.key === 's' || e.key === 'S') {
                const newUtc = prompt('Enter new UTC offset (e.g., +3):');
                if (newUtc !== null) {
                    utcOffset = parseFloat(newUtc) || 2;
                    egyptOffset = utcOffset * 3600;
                    updateHeading();
                }
            }
        });
        function updateClock() {
            const now = new Date();
            const localSeconds = (now.getTime() / 1000) + egyptOffset;
            const total_seconds = localSeconds % (42 * 3600);
            const seconds = total_seconds % 60;
            const minutes = Math.floor(total_seconds / 60) % 60;
            const hours = Math.floor(total_seconds / 3600);
            const sec_frac = seconds / 60;
            const min_frac = (minutes + seconds / 60) / 60;
            const hour_frac = (hours + minutes / 60 + seconds / 3600) / 42;
            const sec_deg = - (sec_frac * 360);
            const min_deg = - (min_frac * 360);
            const hour_deg = - (hour_frac * 360);
            document.getElementById('sec-hand').setAttribute('transform', `rotate(${sec_deg} 150 150)`);
            document.getElementById('min-hand').setAttribute('transform', `rotate(${min_deg} 150 150)`);
            document.getElementById('hour-hand').setAttribute('transform', `rotate(${hour_deg} 150 150)`);
            const dispHours = Math.floor(hours).toString().padStart(2, '0');
            const dispMin = Math.floor(minutes).toString().padStart(2, '0');
            const dispSec = Math.floor(seconds).toString().padStart(2, '0');
            document.getElementById('digital').textContent = `${dispHours}:${dispMin}:${dispSec}`;
            const currentTime = `${dispHours}:${dispMin}`;
            alarms.forEach(alarm => {
                if (alarm.on && alarm.time === currentTime && Math.floor(seconds) === 0) {
                    startAlarm();
                }
            });
            const selectedOffset = parseInt(select.value);
            const compSeconds = Math.floor(now.getTime() / 1000) + selectedOffset * 3600;
            const compHours = Math.floor(compSeconds / 3600) % 24;
            const compMin = Math.floor((compSeconds % 3600) / 60);
            const compSec = compSeconds % 60;
            document.getElementById('utc-digital').textContent = `${compHours.toString().padStart(2, '0')}:${compMin.toString().padStart(2, '0')}:${compSec.toString().padStart(2, '0')}`;
            const localDate = new Date(now.getTime() + egyptOffset * 1000);
            const localDayOfWeek = localDate.getUTCDay();
            const localHours = localDate.getUTCHours();
            const localMins = localDate.getUTCMinutes();
            const localSecs = localDate.getUTCSeconds();
            const hoursSinceSunday = localDayOfWeek * 24 + localHours + localMins / 60 + localSecs / 3600;
            const customDayIndex = Math.floor(hoursSinceSunday / 42) % 4;
            const dayBoxes = document.querySelectorAll('.day-box');
            dayBoxes.forEach((box, i) => {
                box.style.backgroundColor = (i === customDayIndex) ? '#F0F0F0' : '#E3CEB9';
            });
            document.getElementById('current-day-name').textContent = dayNames[customDayIndex];
            document.getElementById('current-day-sub').textContent = daySubs[customDayIndex].replace('-', ' - ');
        }
        setInterval(updateClock, 50);
        updateClock();
    </script>
</body>
</html>
